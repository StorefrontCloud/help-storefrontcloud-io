(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{353:function(e,t,r){"use strict";r.r(t);var o=r(42),a=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"docker-registry"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-registry"}},[e._v("#")]),e._v(" Docker Registry")]),e._v(" "),r("p",[e._v("All images generated in the build process are stored in our "),r("a",{attrs:{href:"https://docs.docker.com/registry/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Registry"),r("OutboundLink")],1),e._v(". Access to the registry is limited only for the Storefront Cloud users. Registry is available under address "),r("RouterLink",{attrs:{to:"/guide/ci/registry.storefrontcloud.io/"}},[e._v("registry.storefrontcloud.io")]),e._v(".")],1),e._v(" "),r("p",[e._v("By default images are tagged by git hash, ex: "),r("code",[e._v("registry.storefrontcloud.io/demo-storefrontcloud-io/vue-storefront:dc7b0af2")]),e._v(". Only for git tags images are tagged by git tag "),r("code",[e._v("registry.storefrontcloud.io/demo-storefrontcloud-io/vue-storefront:1.2.3")]),e._v(". It is managed by CI and configuration is in "),r("code",[e._v(".gitlab-ci.yml")]),e._v(" file, default configuration is like below.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('  script:\n    - echo "{\\"auths\\":{\\"$REGISTRY_URL\\":{\\"username\\":\\"$REGISTRY_USER\\",\\"password\\":\\"$REGISTRY_PASSWORD\\"}}}" > /kaniko/.docker/config.json\n    - TAG=${CI_COMMIT_SHA:0:8}\n    - if [ -n "$CI_COMMIT_TAG" ]; then TAG=$CI_COMMIT_TAG; fi\n    - /kaniko/executor --context $CI_PROJECT_DIR --dockerfile $CI_PROJECT_DIR/dev/docker/Dockerfile --destination $REGISTRY_IMAGE:$TAG\n')])])]),r("h2",{attrs:{id:"access-data"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#access-data"}},[e._v("#")]),e._v(" Access Data")]),e._v(" "),r("p",[e._v("Login and password are stored as GitLab Variables in project configuration as variable "),r("code",[e._v("REGISTRY_USER")]),e._v(" and "),r("code",[e._v("REGISTRY_PASSWORD")]),e._v(".")]),e._v(" "),r("p",[r("img",{attrs:{src:"/doc/ci-docker-registr.png",alt:"ci-docker-registr.png"}})]),e._v(" "),r("h2",{attrs:{id:"images-live-time"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#images-live-time"}},[e._v("#")]),e._v(" Images Live Time")]),e._v(" "),r("p",[e._v("All images with a tag other than compatible with "),r("a",{attrs:{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Semantic Versioning"),r("OutboundLink")],1),e._v(" are removed after 30 days.")]),e._v(" "),r("p",[e._v("How does it work? Look at the examples below.")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("tag")]),e._v(" "),r("th",[e._v("live time")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("dc7b0af2")]),e._v(" "),r("td",[e._v("30 days")])]),e._v(" "),r("tr",[r("td",[e._v("1.1.1.1")]),e._v(" "),r("td",[e._v("30 days")])]),e._v(" "),r("tr",[r("td",[e._v("some_name")]),e._v(" "),r("td",[e._v("30 days")])]),e._v(" "),r("tr",[r("td",[e._v("1.3.4-dev")]),e._v(" "),r("td",[e._v("30 days")])]),e._v(" "),r("tr",[r("td",[e._v("1.2.4")]),e._v(" "),r("td",[e._v("forever")])]),e._v(" "),r("tr",[r("td",[e._v("3.4.2")]),e._v(" "),r("td",[e._v("forever")])])])]),e._v(" "),r("p",[r("strong",[e._v("Important note:")]),e._v(" For the production environment only tags compatible with Semantic Versioning should be used.")])])}),[],!1,null,null,null);t.default=a.exports}}]);