(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{362:function(n,t,e){"use strict";e.r(t);var a=e(42),c=Object(a.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"cache-for-static-content"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cache-for-static-content"}},[n._v("#")]),n._v(" Cache for static content")]),n._v(" "),e("p",[n._v("For two locations "),e("code",[n._v("/img")]),n._v(" and "),e("code",[n._v("/assets")]),n._v(" cache for static content is enabled. It is Nginx cache for static content and is configured by definioton like below.")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("proxy_cache static;\nproxy_cache_valid 200 24h;\n")])])]),e("h2",{attrs:{id:"flush-cache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#flush-cache"}},[n._v("#")]),n._v(" Flush cache")]),n._v(" "),e("p",[n._v("To flush cache for static content delete pod with Nginx. It can be done by "),e("code",[n._v("kubectl")]),n._v(" command or Storefront Cloud CLI tool.")]),n._v(" "),e("h3",{attrs:{id:"kubectl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubectl"}},[n._v("#")]),n._v(" kubectl")]),n._v(" "),e("p",[n._v("List all pods by command "),e("code",[n._v("kubectl --kubeconfig path/to/kube.config -n project-storefrontcloud-io get pod")])]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("NAME                                     READY   STATUS    RESTARTS   AGE\nNAME                                  READY   STATUS      RESTARTS   AGE\nbackups-1583818800-vpdxs              0/1     Completed   0          2d7h\nbackups-1583905200-mn7m8              0/1     Completed   0          31h\nbackups-1583991600-fff52              0/1     Completed   0          7h42m\nelasticsearch-0                       1/1     Running     0          9d\nelasticsearch-1                       1/1     Running     0          9d\nelasticsearch-2                       1/1     Running     0          9d\nnginx-7789b4b968-6rz86                1/1     Running     0          3h20m\nnginx-7789b4b968-l5zhm                1/1     Running     0          3h19m\nredis-7684cb956c-qx922                1/1     Running     0          19d\nvue-storefront-66f456c499-qtr6c       1/1     Running     15         19d\nvue-storefront-66f456c499-w44wb       1/1     Running     7          19d\nvue-storefront-api-5f8cc5c7f7-96gmf   1/1     Running     0          3d5h\nvue-storefront-api-5f8cc5c7f7-htrnl   1/1     Running     0          3d5h\n")])])]),e("p",[n._v("Find Nginx pods, in the example above Nginx pods are pod "),e("code",[n._v("nginx-7789b4b968-6rz86")]),n._v(" and pod "),e("code",[n._v("nginx-7789b4b968-l5zhm")]),n._v(" and remove them by command:")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("kubectl  --kubeconfig path/to/kube.config -n project-storefrontcloud-io delete pod nginx-7789b4b968-6rz86 nginx-7789b4b968-l5zhm\n")])])]),e("h3",{attrs:{id:"storefront-cloud-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#storefront-cloud-cli"}},[n._v("#")]),n._v(" Storefront Cloud CLI")]),n._v(" "),e("p",[n._v("List all pods by command "),e("code",[n._v("node scripts/cli.js pods")])]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("┌─────────────────────────────────────────────┬──────────┬──────────┬─────────────────────────┐\n│ POD name                                    │ Role     │ State    │ Start time              │\n├─────────────────────────────────────────────┼──────────┼──────────┼─────────────────────────┤\n│ elasticsearch-75cf68b6b7-thjsx              │ elastic  │ Running  │ 2018-10-12T11:36:05Z    │\n├─────────────────────────────────────────────┼──────────┼──────────┼─────────────────────────┤\n│ kibana-69777f68b-dd6s5                      │          │ Running  │ 2018-10-09T13:24:06Z    │\n├─────────────────────────────────────────────┼──────────┼──────────┼─────────────────────────┤\n│ nginx-6d68c9557-l67l2                       │ nginx    │ Running  │ 2018-10-09T13:24:02Z    │\n├─────────────────────────────────────────────┼──────────┼──────────┼─────────────────────────┤\n│ redis-84d7c989c9-5j4tq                      │ redis    │ Running  │ 2018-10-09T13:24:06Z    │\n├─────────────────────────────────────────────┼──────────┼──────────┼─────────────────────────┤\n│ vue-storefront-848799bd5d-zvcd4             │ front    │ Running  │ 2018-10-12T11:46:09Z    │\n├─────────────────────────────────────────────┼──────────┼──────────┼─────────────────────────┤\n│ vue-storefront-api-5c5dbc57fd-l9fhr         │ api      │ Running  │ 2018-10-12T14:14:37Z    │\n└─────────────────────────────────────────────┴──────────┴──────────┴─────────────────────────┘\n")])])]),e("p",[n._v("Find Nginx pod, in the example above it is pod "),e("code",[n._v("nginx-6d68c9557-l67l2")]),n._v(" and remove it by command:")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("node scripts/cli.js deploy\n")])])])])}),[],!1,null,null,null);t.default=c.exports}}]);